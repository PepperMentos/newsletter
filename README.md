# newsletter
CN newsletter, here is the template code for sending newsletter, you can change it when required, like you need different fields in csv file, or different variables in template.

### Paramsters
	
	-host string
    	Ex. https://www.thecn.com
  	-mail_from string
    	set from email (default "help@thecn.com")
  	-mail_subject string
    	set subject of this email
  	-max_mail_per_conn int
    	Max email in each smtp connection (default 1000)
  	-sent_log_file string
    	Ex. sent.log (default "sent.log")
  	-smtp_host string
    	Ex. smtp.sendgrid.net
  	-smtp_port int
    	the port of smtp (default 587)
  	-smtp_pwd string
    	smtp account password
  	-smtp_username string
    	smtp account username
  	-source_file string
    	Ex. users.csv, format:id,username,email
  	-template string
    	Ex. template.html
  	-unsubcribe_salt string
   		The salt for generating CN unsubcribe URL

### CSV format

`user ID`,`username`,`email`

### Variable in template

`{{.Host}}` and `{{.UnsubscribeUrl}}`

`{{.Host}}` is the value of parameter `-host` in command line

`{{.UnsubscribeUrl}}` is the URL for user unsubscrie CN newsletter, it's generated by `user ID` and `-unsubcribe_salt`, you can check the detail in the method `generateUnsubscribeUrl` in `main.go`
